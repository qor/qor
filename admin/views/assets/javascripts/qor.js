!function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.visible=!1,this.isInput=!1,this.isInline=!1,this.init()}function i(t){return"number"==typeof t}function n(t){return t%4===0&&t%100!==0||t%400===0}function s(t,e){return[31,n(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function o(t){var e,i,n=t.match(/[.\/\-\s].*?/)||"/",s=t.split(/\W+/);if(!s||0===s.length)throw new Error("Invalid date format.");for(t={separator:n[0],parts:s},e=s.length,i=0;e>i;i++)switch(s[i]){case"dd":case"d":t.day=!0;break;case"mm":case"m":t.month=!0;break;case"yyyy":case"yy":t.year=!0}return t}function a(t,e){var i,n,s,o,a,r,l;if(i="string"==typeof t&&t?t.split(e.separator):[],n=e.parts.length,t=new Date,s=t.getFullYear(),o=t.getDate(),a=t.getMonth(),i.length===n)for(l=0;n>l;l++)switch(r=parseInt(i[l],10)||1,e.parts[l]){case"dd":case"d":o=r;break;case"mm":case"m":a=r-1;break;case"yy":s=2e3+r;break;case"yyyy":s=r}return new Date(s,a,o,0,0,0,0)}function r(t,e){var i,n={d:t.getDate(),m:t.getMonth()+1,yy:t.getFullYear().toString().substring(2),yyyy:t.getFullYear()},s=[],o=e.parts.length;for(n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m,i=0;o>i;i++)s.push(n[e.parts[i]]);return s.join(e.separator)}var l=t(window),d=t(document),c="datepicker",h="click."+c,u="keyup."+c,p="focus."+c,f="resize."+c;e.prototype={constructor:e,init:function(){var e,i=this.$element,n=this.options;this.$trigger=t(n.trigger||i),this.$picker=e=t(n.template),this.$years=e.find('[data-type="years picker"]'),this.$months=e.find('[data-type="months picker"]'),this.$days=e.find('[data-type="days picker"]'),this.isInput=i.is("input")||i.is("textarea"),this.isInline=n.inline&&(n.container||!this.isInput),this.isInline?(e.find(".datepicker-arrow").hide(),t(n.container||i).append(e)):(t(n.container||"body").append(e),this.place(),e.hide()),n.date&&i.data("date",n.date),this.format=o(n.dateFormat),this.fillWeek(),this.bind(),this.update(),this.isInline&&this.show()},bind:function(){var e=this.$element,i=this.options;this.$picker.on(h,t.proxy(this.click,this)),this.isInline||(this.isInput&&(e.on(u,t.proxy(this.update,this)),i.trigger||e.on(p,t.proxy(this.show,this))),this.$trigger.on(h,t.proxy(this.show,this)))},unbind:function(){var t=this.$element,e=this.options;this.$picker.off(h,this.click),this.isInline||(this.isInput&&(t.off(u,this.update),e.trigger||t.off(p,this.show)),this.$trigger.off(h,this.show))},showView:function(t){var e=this.format;if(e.year||e.month||e.day)switch(t){case 2:case"years":this.$months.hide(),this.$days.hide(),e.year?(this.fillYears(),this.$years.show()):this.showView(0);break;case 1:case"months":this.$years.hide(),this.$days.hide(),e.month?(this.fillMonths(),this.$months.show()):this.showView(2);break;default:this.$years.hide(),this.$months.hide(),e.day?(this.fillDays(),this.$days.show()):this.showView(1)}},hideView:function(){this.options.autoClose&&this.hide()},place:function(){var t=this.$trigger,e=t.offset();this.$picker.css({position:"absolute",top:e.top+t.outerHeight(),left:e.left,zIndex:this.options.zIndex})},show:function(){this.visible||(this.visible=!0,this.$picker.show(),this.isInline||(l.on(f,t.proxy(this.place,this)),d.on(h,t.proxy(function(t){t.target!==this.$element[0]&&this.hide()},this))),this.showView(this.options.viewStart))},hide:function(){this.visible&&(this.visible=!1,this.$picker.hide(),this.isInline||(l.off(f,this.place),d.off(h,this.hide)))},update:function(){var t=this.$element,e=t.data("date")||(this.isInput?t.prop("value"):t.text());this.date=e=a(e,this.format),this.viewDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.fillAll()},change:function(){var t=this.$element,e=r(this.date,this.format);this.isInput?t.prop("value",e):this.isInline||t.text(e),t.data("date",e).trigger("change")},getMonthByNumber:function(t,e){var n=this.options,s=e?n.monthsShort:n.months;return s[i(t)?t:this.date.getMonth()]},getDayByNumber:function(t,e,n){var s=this.options,o=n?s.daysMin:e?s.daysShort:s.days;return o[i(t)?t:this.date.getDay()]},getDate:function(t){return t?r(this.date,this.format):new Date(this.date)},template:function(e){var i=this.options,n={text:"",type:"",selected:!1,disabled:!1};return t.extend(n,e),["<"+i.itemTag+" ",n.selected?'class="'+i.selectedClass+'"':n.disabled?'class="'+i.disabledClass+'"':"",n.type?' data-type="'+n.type+'"':"",">",n.text,"</"+i.itemTag+">"].join("")},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillYears:function(){var t,e,i="",n=[],s=this.options.yearSuffix||"",o=this.date.getFullYear(),a=this.viewDate.getFullYear();for(i=a-5+s+" - "+(a+6)+s,e=-5;7>e;e++)t=a+e===o,n.push(this.template({text:a+e,type:t?"year selected":"year",selected:t,disabled:-5===e||6===e}));this.$picker.find('[data-type="years current"]').html(i),this.$picker.find('[data-type="years"]').empty().html(n.join(""))},fillMonths:function(){var t,e,i="",n=[],s=this.options.monthsShort,o=this.date.getFullYear(),a=this.date.getMonth(),r=this.viewDate.getFullYear();for(i=r.toString()+this.options.yearSuffix||"",e=0;12>e;e++)t=r===o&&e===a,n.push(this.template({text:s[e],type:t?"month selected":"month",selected:t}));this.$picker.find('[data-type="year current"]').html(i),this.$picker.find('[data-type="months"]').empty().html(n.join(""))},fillWeek:function(){var e,i=this.options,n=[],s=i.daysMin,o=parseInt(i.weekStart,10)%7;for(s=t.merge(s.slice(o),s.slice(0,o)),e=0;7>e;e++)n.push(this.template({text:s[e]}));this.$picker.find('[data-type="week"]').html(n.join(""))},fillDays:function(){var e,i,n,o,a,r,l="",d=[],c=[],h=[],u=[],p=this.options.monthsShort,f=this.options.yearSuffix||"",m=this.date.getFullYear(),g=this.date.getMonth(),y=this.date.getDate(),b=this.viewDate.getFullYear(),v=this.viewDate.getMonth(),w=parseInt(this.options.weekStart,10)%7;for(l=this.options.showMonthAfterYear?b+f+" "+p[v]:p[v]+" "+b+f,n=0===v?s(b-1,11):s(b,v-1),a=1;n>=a;a++)c.push(this.template({text:a,type:"day prev",disabled:!0}));for(o=new Date(b,v,1,0,0,0,0),r=(7+(o.getDay()-w))%7,r=r>0?r:7,c=c.slice(n-r),n=11===v?s(b+1,0):s(b,v+1),a=1;n>=a;a++)u.push(this.template({text:a,type:"day next",disabled:!0}));for(n=s(b,v),o=new Date(b,v,n,0,0,0,0),r=(7-(o.getDay()+1-w))%7,r=r>=42-(c.length+n)?r:r+7,u=u.slice(0,r),a=1;n>=a;a++)e=b===m&&v===g&&a===y,i=this.options.isDisabled(new Date(b,v,a)),h.push(this.template({text:a,type:i?"day disabled":e?"day selected":"day",selected:e,disabled:i}));t.merge(d,c),t.merge(d,h),t.merge(d,u),this.$picker.find('[data-type="month current"]').html(l),this.$picker.find('[data-type="days"]').empty().html(d.join(""))},click:function(e){var i,n,s,o,a,r=t(e.target),l=/^\d{2,4}$/,d=!1;if(e.stopPropagation(),e.preventDefault(),0!==r.length)switch(i=this.viewDate.getFullYear(),n=this.viewDate.getMonth(),s=this.viewDate.getDate(),a=r.data().type){case"years prev":case"years next":i="years prev"===a?i-10:i+10,o=r.text(),d=l.test(o),d&&(i=parseInt(o,10),this.date=new Date(i,n,Math.min(s,28),0,0,0,0)),this.viewDate=new Date(i,n,Math.min(s,28),0,0,0,0),this.fillYears(),d&&(this.showView(1),this.change());break;case"year prev":case"year next":i="year prev"===a?i-1:i+1,this.viewDate=new Date(i,n,Math.min(s,28),0,0,0,0),this.fillMonths();break;case"year current":this.format.year&&this.showView(2);break;case"year selected":this.format.month?this.showView(1):this.hideView();break;case"year":i=parseInt(r.text(),10),this.date=new Date(i,n,Math.min(s,28),0,0,0,0),this.viewDate=new Date(i,n,Math.min(s,28),0,0,0,0),this.format.month?this.showView(1):this.hideView(),this.change();break;case"month prev":case"month next":n="month prev"===a?n-1:"month next"===a?n+1:n,this.viewDate=new Date(i,n,Math.min(s,28),0,0,0,0),this.fillDays();break;case"month current":this.format.month&&this.showView(1);break;case"month selected":this.format.day?this.showView(0):this.hideView();break;case"month":n=r.parent().children().index(r),this.date=new Date(i,n,Math.min(s,28),0,0,0,0),this.viewDate=new Date(i,n,Math.min(s,28),0,0,0,0),this.format.day?this.showView(0):this.hideView(),this.change();break;case"day prev":case"day next":case"day":n="day prev"===a?n-1:"day next"===a?n+1:n,s=parseInt(r.text(),10),this.date=new Date(i,n,s,0,0,0,0),this.viewDate=new Date(i,n,s,0,0,0,0),this.fillDays(),"day"===a&&this.hideView(),this.change();break;case"day selected":this.hideView(),this.change();break;case"day disabled":this.hideView()}},destroy:function(){this.unbind(),this.$picker.remove(),this.$element.removeData(c)}},e.DEFAULTS={date:!1,dateFormat:"mm/dd/yyyy",disabledClass:"disabled",selectedClass:"selected",autoClose:!1,inline:!1,trigger:!1,container:!1,showMonthAfterYear:!1,zIndex:1,viewStart:0,weekStart:0,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",template:'<div class="datepicker-container" data-type="datepicker"><div class="datepicker-arrow"></div><div class="datepicker-content"><div class="content-years" data-type="years picker"><ul class="datepicker-title"><li class="datepicker-prev" data-type="years prev">&lsaquo;</li><li class="col-5" data-type="years current"></li><li class="datepicker-next" data-type="years next">&rsaquo;</li></ul><ul class="datepicker-years" data-type="years"></ul></div><div class="content-months" data-type="months picker"><ul class="datepicker-title"><li class="datepicker-prev" data-type="year prev">&lsaquo;</li><li class="col-5" data-type="year current"></li><li class="datepicker-next" data-type="year next">&rsaquo;</li></ul><ul class="datepicker-months" data-type="months"></ul></div><div class="content-days" data-type="days picker"><ul class="datepicker-title"><li class="datepicker-prev" data-type="month prev">&lsaquo;</li><li class="col-5" data-type="month current"></li><li class="datepicker-next" data-type="month next">&rsaquo;</li></ul><ul class="datepicker-week" data-type="week"></ul><ul class="datepicker-days" data-type="days"></ul></div></div></div>',isDisabled:function(){return!1}},e.setDefaults=function(i){t.extend(e.DEFAULTS,t.isPlainObject(i)&&i)},e.other=t.fn.datepicker,t.fn.datepicker=function(i){var n,s=[].slice.call(arguments,1);return this.each(function(){var o,a=t(this),r=a.data(c);if(!r){if(/destroy/.test(i))return;a.data(c,r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&(n=o.apply(r,s))}),"undefined"==typeof n?this:n},t.fn.datepicker.Constructor=e,t.fn.datepicker.setDefaults=e.setDefaults,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=e.other,this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.$wrap=t(l),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.$clone=null,this.init()}var i="qor.action",n="enable."+i,s="disable."+i,o="click."+i,a="change."+i,r="submit."+i,l=".qor-action-wrap";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on(o,t.proxy(this.click,this)),this.$element.on(a,t.proxy(this.change,this)),this.$wrap.on(r,"form",t.proxy(this.submit,this)),t(".qor-table-container").on(o,"tr",this.click)},unbind:function(){this.$element.off(o,this.check),this.$element.off(a,this.change),this.$element.off(r,this.submit)},click:function(e){var i=t(e.target);if(t(this).is("tr")&&!i.is("a")){var n=t(this).find("td").first();if(n.find(".mdl-checkbox__input").get(0)){var s=n.find(".mdl-js-checkbox");return s.toggleClass("is-checked"),n.parents("tr").toggleClass("is-selected"),n.find("input").prop("checked",s.hasClass("is-checked")),!1}}},change:function(e){var i=t(e.target);if(i.is(".qor-js-selector")){var n=i.parents(".qor-slideout").get(0)?i.parents(".qor-slideout"):t("body");if(n.find(".qor-action-wrap .qor-js-form").hide(),n.find('.qor-action-wrap .qor-js-form[data-action="'+i.val()+'"]').show(),!i.parents(".qor-slideout").get(0)){var s=t(".qor-page__header").outerHeight()+24;t(".qor-page__body").css({"padding-top":s})}t.proxy(this.appendCheckbox,i)()}},submit:function(e){var i=t(e.target);"index"===i.data("mode")&&t.proxy(this.appendCheckInputs,i)();var n=i.find("button");return i.find("qor-js-loading").show(),t.ajax(i.prop("action"),{method:i.prop("method"),data:new FormData(i.get(0)),processData:!1,contentType:!1,beforeSend:function(){n.prop("disabled",!0)},success:function(){location.reload()},error:function(e,n,s){var o;422===e.status?(i.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),o=t(e.responseText).find(".qor-error"),i.before(o),o.find("> li > label").each(function(){var e=t(this),n=e.attr("for");n&&i.find("#"+n).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))})):window.alert([n,s].join(": "))},complete:function(){n.prop("disabled",!1)}}),!1},destroy:function(){this.unbind(),this.$element.removeData(i)},appendCheckbox:function(){if(t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(this).val()){t(".qor-page__body table").addClass("mdl-data-table--selectable"),window.newQorMaterialDataTable=new window.MaterialDataTable(t(".qor-page__body table").get(0)),t('thead.is-hidden tr th:not(".mdl-data-table__cell--non-numeric")').clone().prependTo(t('thead:not(".is-hidden") tr'));var e=t('thead:not(".is-fixed") .mdl-checkbox__input').parents("label");e.find("span").remove(),window.newQorMaterialCheckbox=new window.MaterialCheckbox(e.get(0)),e.click(function(){return t("thead.is-fixed tr th").eq(0).find("label").click(),t(this).toggleClass("is-checked"),!1})}else t(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),t(".qor-page__body tr.is-selected").removeClass("is-selected")},appendCheckInputs:function(){var e=t(this);e.find("input.js-primary-value").remove(),t(".qor-page__body .mdl-checkbox__input:checked").each(function(i,n){var s=t(n).parents("tr").data("primary-key");e.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+s+'" />')})}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var s,o=t(this),a=o.data(i);a||o.data(i,a=new e(this,n)),"string"==typeof n&&t.isFunction(s=a[n])&&s.call(a)})},t(function(){var i=".qor-js-action",o={};t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.autoheight",n="enable."+i,s="disable."+i,o="input";return e.prototype={constructor:e,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on(o,t.proxy(this.resize,this))},unbind:function(){this.$element.off(o,this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var s,o=t(this),a=o.data(i);if(!a){if(/destroy/.test(n))return;o.data(i,a=new e(this,n))}"string"==typeof n&&t.isFunction(s=a[n])&&s.apply(a)})},t(function(){var i="textarea.qor-js-autoheight";t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.chooser",n="enable."+i,s="disable."+i;return e.prototype={constructor:e,init:function(){var t=this.$element;t.prop("multiple")||(t.children("[selected]").length?t.prepend('<option value=""></option>'):t.prepend('<option value="" selected></option>')),t.chosen({allow_single_deselect:!0,search_contains:!0,disable_search_threshold:10,width:"100%"})},destroy:function(){this.$element.chosen("destroy").removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var s,o=t(this),a=o.data(i);if(!a){if(!t.fn.chosen)return;if(/destroy/.test(n))return;o.data(i,a=new e(this,n))}"string"==typeof n&&t.isFunction(s=a[n])&&s.apply(a)})},t(function(){var i='select[data-toggle="qor.chooser"]';t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function i(e){var i,n={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(n[String(i).toLowerCase()]=e[i]);return n}function n(i,n){var s=String(n),o=s.toLowerCase(),a=s.toUpperCase(),r=e(s);return t.isPlainObject(i)?i[o]||i[r]||i[a]:void 0}function s(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function o(e,i){this.$element=t(e),this.options=t.extend(!0,{},o.DEFAULTS,t.isPlainObject(i)&&i),this.data=null,this.init()}var a=window.URL||window.webkitURL,r="qor.cropper",l="enable."+r,d="disable."+r,c="change."+r,h="click."+r,u="shown.qor.modal",p="hidden.qor.modal",f=".qor-cropper__toggle",m=".qor-cropper__canvas",g=".qor-cropper__wrapper",y=".qor-cropper__options",b=".qor-cropper__save";return o.prototype={constructor:o,init:function(){var e,i,n=this.options,s=this.$element,o=s.closest(n.parent);o.length||(o=s.parent()),this.$parent=o,this.$output=o.find(n.output),this.$list=e=o.find(n.list),e.find("img").attr("src")||e.find("ul").hide();try{i=JSON.parse(t.trim(this.$output.val()))}catch(a){}this.data=i||{},this.build(),this.bind()},build:function(){this.wrap(),this.$modal=t(s(o.MODAL,this.options.text)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t,e=this.$list;e.find("li").append(o.TOGGLE),t=e.find("img"),t.wrap(o.CANVAS),this.center(t)},unwrap:function(){var e=this.$list;e.find(f).remove(),e.find(m).each(function(){var e=t(this);e.before(e.html()).remove()})},bind:function(){this.$element.on(c,t.proxy(this.read,this)),this.$list.on(h,t.proxy(this.click,this)),this.$modal.on(u,t.proxy(this.start,this)).on(p,t.proxy(this.stop,this))},unbind:function(){this.$element.off(c,this.read),this.$list.off(h,this.click),this.$modal.off(u,this.start).off(p,this.stop)},click:function(e){var i,n=e.target;n!==this.$list[0]&&(i=t(n),i.is("img")||(i=i.closest("li").find("img")),this.$target=i,this.$modal.qorModal("show"))},read:function(t){var e,i=t.target.files;i&&i.length&&(e=i[0],/^image\/\w+$/.test(e.type)&&a?this.load(a.createObjectURL(e)):this.$list.empty().text(e.name))},load:function(e){var i,s=this.options,a=this,r=this.$list,l=r.find("ul"),d=this.data;l.length||(l=t(o.LIST),r.html(l),this.wrap()),l.show(),i=r.find("img"),i.one("load",function(){var e,i,o,r=t(this),l=this.naturalWidth,c=this.naturalHeight,h=r.data(),u=h.sizeResolution,p=h.sizeName,f={},m={};u?(i=n(u,"width"),o=n(u,"height"),e=i/o,c*e>l?(i=l,o=i/e):(o=c,i=o*e),i*=.8,o*=.8,f={naturalWidth:l,naturalHeight:c},m={x:Math.round((l-i)/2),y:Math.round((c-o)/2),width:Math.round(i),height:Math.round(o)},a.preview(r,f,m),p&&(d.crop=!0,d[s.key]||(d[s.key]={}),d[s.key][p]=m)):a.center(r),a.$output.val(JSON.stringify(d))}).attr("src",e).data("originalUrl",e)},start:function(){var e,s,o,a=this.options,r=this.$modal,l=this.$target,d=l.data(),c=d.sizeName||"original",u=d.sizeResolution,p=t("<img>").attr("src",d.originalUrl),f=this.data,m=this,v=NaN;u&&(e=n(u,"width"),s=n(u,"height"),v=e/s),f[a.key]||(f[a.key]={}),r.trigger("enable.qor.material").find(g).html(p),o=this.getList(v),o&&r.find(y).show().append(o),p.cropper({aspectRatio:v,data:i(f[a.key][c]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){r.find(b).one(h,function(){var e,i=p.cropper("getData",!0),n=[];f.crop=!0,f[a.key][c]=i,m.imageData=p.cropper("getImageData"),m.cropData=i;try{e=p.cropper("getCroppedCanvas").toDataURL()}catch(s){}r.find(y+" input").each(function(){var e=t(this);e.prop("checked")&&n.push(e.attr("name"))}),m.output(e,n),r.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(g+" > img").cropper("destroy").remove().end().find(y).hide().find("ul").remove()},getList:function(e){var i=[];return this.$list.find("img").not(this.$target).each(function(){var s,o,a=t(this).data(),r=a.sizeResolution,l=a.sizeName;r&&(s=n(r,"width"),o=n(r,"height"),s/o===e&&i.push('<label><input type="checkbox" name="'+l+'" checked> <span>'+l+"<small>("+s+"&times;"+o+" px)</small></span></label>"))}),i.length?"<ul><li>"+i.join("</li><li>")+"</li></ul>":""},output:function(e,i){var n=this.$target;e?this.center(n.attr("src",e),!0):this.preview(n),t.isArray(i)&&i.length&&this.autoCrop(e,i),this.$output.val(JSON.stringify(this.data))},preview:function(e,i,n){var s,o=e.parent(),a=o.parent(),r=a.width(),l=a.height(),d=i||this.imageData,c=t.extend({},n||this.cropData),h=c.width/c.height,u=r,p=l;l*h>r?p=r/h:u=l*h,s=c.width/u,o.css({width:u,height:p}),e.css({maxWidth:"none",maxHeight:"none",width:d.naturalWidth/s,height:d.naturalHeight/s,marginLeft:-c.x/s,marginTop:-c.y/s}),this.center(e)},center:function(e,i){e.each(function(){function e(){var t=o.height(),e=s.height(),i="auto";t>e&&(i=(t-e)/2),s.css("margin-top",i)}var n=t(this),s=n.parent(),o=s.parent();i&&s.add(n).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(e,i){var n=this.cropData,s=this.data[this.options.key],o=this;this.$list.find("img").not(this.$target).each(function(){var a=t(this),r=a.data("sizeName");t.inArray(r,i)>-1&&(s[r]=t.extend({},n),e?o.center(a.attr("src",e),!0):o.preview(a))})},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(r)}},o.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},o.TOGGLE='<div class="qor-cropper__toggle"><i class="material-icons">crop</i></div>',o.CANVAS='<div class="qor-cropper__canvas"></div>',o.LIST="<ul><li><img></li></ul>",o.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div><div class="qor-cropper__options"><p>Sync cropping result to:</p></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',o.plugin=function(e){return this.each(function(){var i,n,s=t(this),a=s.data(r);if(!a){if(!t.fn.cropper)return;if(/destroy/.test(e))return;i=t.extend(!0,{},s.data(),"object"==typeof e&&e),s.data(r,a=new o(this,i))}"string"==typeof e&&t.isFunction(n=a[e])&&n.apply(a)})},t(function(){var e=".qor-file__input",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};t(document).on(l,function(n){o.plugin.call(t(e,n.target),i)}).on(d,function(i){o.plugin.call(t(e,i.target),"destroy")}).triggerHandler(l)}),o}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function i(e,n){this.$element=t(e),this.options=t.extend(!0,{},i.DEFAULTS,t.isPlainObject(n)&&n),this.date=null,this.formatDate=null,this.built=!1,this.init()}var n="qor.datepicker",s="enable."+n,o="disable."+n,a="change."+n,r="click."+n,l=".qor-datepicker__embedded",d=".qor-datepicker__save";return i.prototype={init:function(){this.bind()},bind:function(){this.$element.on(r,t.proxy(this.show,this))},unbind:function(){this.$element.off(r,this.show)},build:function(){var n;this.built||(this.$modal=n=t(e(i.TEMPLATE,this.options.text)).appendTo("body"),n.find(l).on(a,t.proxy(this.change,this)).datepicker({date:this.$element.val(),dateFormat:"yyyy-mm-dd",inline:!0}).triggerHandler(a),n.find(d).on(r,t.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(l).off(a,this.change).datepicker("destroy").end().find(d).off(r,this.pick).end().remove()},change:function(e){var i,n=this.$modal,s=t(e.target);this.date=i=s.datepicker("getDate"),this.formatDate=s.datepicker("getDate",!0),n.find(".qor-datepicker__picked-year").text(i.getFullYear()),n.find(".qor-datepicker__picked-date").text([s.datepicker("getDayByNumber",i.getDay(),!0)+",",String(s.datepicker("getMonthByNumber",i.getMonth(),!0)),i.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){this.$element.val(this.formatDate).closest(".mdl-js-textfield").trigger("update.qor.material"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(n)}},i.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},i.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-datepicker__picked"><div class="qor-datepicker__picked-year"></div><div class="qor-datepicker__picked-date"></div></div><div class="qor-datepicker__embedded"></div></div><div class="mdl-card__actions"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-datepicker__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div></div></div>',i.plugin=function(e){return this.each(function(){var s,o,a=t(this),r=a.data(n);if(!r){if(!t.fn.datepicker)return;if(/destroy/.test(e))return;s=t.extend(!0,{},a.data(),"object"==typeof e&&e),a.data(n,r=new i(this,s))}"string"==typeof e&&t.isFunction(o=r[e])&&o.apply(r)})},t(function(){var e='[data-toggle="qor.datepicker"]';t(document).on(o,function(n){i.plugin.call(t(e,n.target),"destroy")}).on(s,function(n){i.plugin.call(t(e,n.target))}).triggerHandler(s)}),i}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}function i(e,i){var o,a=s.search;return t.isArray(e)&&(o=n(a),t.each(e,function(e,n){e=t.inArray(n,o),-1===e?o.push(n):i&&o.splice(e,1)}),a="?"+o.join("&")),a}function n(e){var i=[];return e&&e.indexOf("?")>-1&&(e=e.split("?")[1],e&&e.indexOf("#")>-1&&(e=e.split("#")[0]),e&&(i=t.map(e.split("&"),function(e){var i,n=[];return e=e.split("="),i=e[1],n.push(e[0]),i&&(i=t.trim(decodeURIComponent(i)),i&&n.push(i)),n.join("=")}))),i}var s=window.location,o="qor.filter",a="enable."+o,r="disable."+o,l="click."+o,d="change."+o,c="is-active";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){var e=this.options;this.$element.on(l,e.label,t.proxy(this.toggle,this)).on(d,e.group,t.proxy(this.toggle,this))},unbind:function(){this.$element.off(l,this.toggle).off(d,this.toggle)},toggle:function(e){var o,a,r,l,d,h,u,p=t(e.currentTarget),f=[];p.is("select")?(o=n(s.search),l=p.attr("name"),d=p.val(),a=[l],d&&a.push(d),a=a.join("="),d&&f.push(a),p.children().each(function(){var e=t(this),i=[l],n=t.trim(e.prop("value"));return n&&i.push(n),i=i.join("="),h=t.inArray(i,o),h>-1?(u=i,!1):void 0}),u?(f.push(u),r=i(f,!0)):r=i(f)):p.is("a")&&(e.preventDefault(),f=n(p.attr("href")),r=p.hasClass(c)?i(f,!0):i(f)),s.search=r},destroy:function(){this.unbind(),this.$element.removeData(o)}},e.DEFAULTS={label:!1,group:!1},e.plugin=function(i){return this.each(function(){var n,s=t(this),a=s.data(o);if(!a){if(/destroy/.test(i))return;s.data(o,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t(function(){var i='[data-toggle="qor.filter"]',n={label:"a",group:"select"};t(document).on(r,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(a,function(s){e.plugin.call(t(i,s.target),n)}).triggerHandler(a)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.$clone=null,this.init()}var i="qor.fixer",n="enable."+i,s="disable."+i,o="click."+i,a="resize."+i,r="scroll."+i,l="is-hidden",d="is-fixed";return e.prototype={constructor:e,init:function(){var e=this.options,i=this.$element;t(".qor-page__body .qor-js-table").size()>1||i.is(":hidden")||i.find("tbody > tr:visible").length<=1||(this.$thead=i.find("thead:first"),this.$tbody=i.find("tbody:first"),this.$header=t(e.header),this.$subHeader=t(e.subHeader),this.$content=t(e.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=e.paddingHeight,this.resize(),this.bind())},bind:function(){this.$element.on(o,t.proxy(this.check,this)),this.$content.on(r,t.proxy(this.toggle,this)).on(a,t.proxy(this.resize,this))},unbind:function(){this.$element.off(o,this.check),this.$content.off(r,this.toggle).off(a,this.resize)},build:function(){var e=this.$element,i=this.$thead,n=this.$clone,s=i.find("> tr").children();n||(this.$clone=n=i.clone().prependTo(e)),n.addClass([d,l].join(" ")).find("> tr").children().each(function(e){t(this).width(s.eq(e).width())})},unbuild:function(){this.$clone.remove()},check:function(e){var i,n=t(e.target);n.is(".qor-js-check-all")&&(i=n.prop("checked"),n.closest("thead").siblings("thead").find(".qor-js-check-all").prop("checked",i).closest(".mdl-checkbox").toggleClass("is-checked",i))},toggle:function(){var e=this.$element,i=this.$clone,n=this.$thead.outerHeight(),s=this.$tbody.find("tr:last").outerHeight(),o=this.$content.scrollTop(),a=0,r=e.outerHeight()-n-s,d=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,c=t(".qor-page__header").outerHeight(),h=Math.min(o-d,r)+c;o>d-c?i.css("top",h).removeClass(l):i.css("top",a).addClass(l)},resize:function(){this.build(),this.toggle()},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(i)}},e.DEFAULTS={header:!1,content:!1},e.plugin=function(n){return this.each(function(){var s,o=t(this),a=o.data(i);a||o.data(i,a=new e(this,n)),"string"==typeof n&&t.isFunction(s=a[n])&&s.call(a);
})},t(function(){var i=".qor-js-table",o={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e){componentHandler&&(t(e).is(r)?componentHandler.upgradeElements(e):componentHandler.upgradeElements(t(r,e).toArray()))}function i(e){componentHandler&&(t(e).is(r)?componentHandler.downgradeElements(e):componentHandler.downgradeElements(t(r,e).toArray()))}var n="qor.material",s="enable."+n,o="disable."+n,a="update."+n,r='[class*="mdl-js"]';t(function(){t(document).on(s,function(t){e(t.target)}).on(o,function(t){i(t.target)}).on(a,function(t){i(t.target),e(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.transitioning=!1,this.fadable=!1,this.init()}var i=t(document),n="qor.modal",s="enable."+n,o="disable."+n,a="click."+n,r="keyup."+n,l="show."+n,d="shown."+n,c="hide."+n,h="hidden."+n,u="transitionend",p="qor-modal-open",f="shown",m="fade",g="in",y="aria-hidden";return e.prototype={constructor:e,init:function(){this.fadable=this.$element.hasClass(m),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(a,t.proxy(this.click,this)),this.options.keyboard&&i.on(r,t.proxy(this.keyup,this))},unbind:function(){this.$element.off(a,this.click),this.options.keyboard&&i.off(r,this.keyup)},click:function(e){var i=this.$element[0],n=e.target;if(n===i&&this.options.backdrop)return void this.hide();for(;n!==i;){if("modal"===t(n).data("dismiss")){this.hide();break}n=n.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(e){var n,s=this.$element;if(!this.transitioning&&!s.hasClass(g)&&(n=t.Event(l),s.trigger(n),!n.isDefaultPrevented())){if(i.find("body").addClass(p),s.addClass(f).scrollTop(0).get(0).offsetHeight,this.transitioning=!0,e||!this.fadable)return s.addClass(g),void this.shown();s.one(u,t.proxy(this.shown,this)),s.addClass(g)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(y,!1).trigger(d).focus()},hide:function(e){var n,s=this.$element;if(!this.transitioning&&s.hasClass(g)&&(n=t.Event(c),s.trigger(n),!n.isDefaultPrevented())){if(i.find("body").removeClass(p),this.transitioning=!0,e||!this.fadable)return s.removeClass(g),void this.hidden();s.one(u,t.proxy(this.hidden,this)),s.removeClass(g)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass(f).attr(y,!0).trigger(h)},toggle:function(){this.$element.hasClass(g)?this.hide():this.show()},destroy:function(){this.$element.removeData(n)}},e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.plugin=function(i){return this.each(function(){var s,o=t(this),a=o.data(n);if(!a){if(/destroy/.test(i))return;o.data(n,a=new e(this,i))}"string"==typeof i&&t.isFunction(s=a[i])&&s.apply(a)})},t.fn.qorModal=e.plugin,t(function(){var i=".qor-modal";t(document).on(a,'[data-toggle="qor.modal"]',function(){var i=t(this),s=i.data(),o=t(s.target||i.attr("href"));e.plugin.call(o,o.data(n)?"toggle":s)}).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))})}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e){var i=[];return t.isPlainObject(e)&&t.each(e,function(){i.push(arguments[1])}),i.join()}function i(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}function n(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function s(e){var i,s={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(s[n(i)]=e[i]);return s}function o(e,i){return"string"==typeof e&&"object"==typeof i&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function a(e,i){this.$element=t(e),this.options=t.extend(!0,{},a.DEFAULTS,t.isPlainObject(i)&&i),this.init()}var r=t(window),l="qor.redactor",d="enable."+l,c="disable."+l,h="click."+l,u="focus."+l,p="blur."+l,f="imageupload."+l,m="imagedelete."+l,g="shown.qor.modal",y="hidden.qor.modal",b=".qor-cropper__wrapper",v=".qor-cropper__save";return a.prototype={constructor:a,init:function(){var e=this.options,i=this.$element,n=i.closest(e.parent);n.length||(n=i.parent()),this.$parent=n,this.$button=t(a.BUTTON),this.$modal=t(o(a.MODAL,e.text)).appendTo("body"),this.bind()},bind:function(){var e=this.$parent,i=t.proxy(this.click,this);this.$element.on(f,function(e,n){t(n).on(h,i)}).on(m,function(e,n){t(n).off(h,i)}).on(u,function(){e.find("img").off(h,i).on(h,i)}).on(p,function(){e.find("img").off(h,i)}),r.on(h,t.proxy(this.removeButton,this))},unbind:function(){this.$element.off(f).off(m).off(u).off(p),r.off(h,this.removeButton)},click:function(e){e.stopPropagation(),setTimeout(t.proxy(this.addButton,this,t(e.target)),1)},addButton:function(e){this.$button.prependTo(e.parent()).off(h).one(h,t.proxy(this.crop,this,e))},removeButton:function(){this.$button.off(h).detach()},crop:function(n){var o=this.options,a=n.attr("src"),r=a,l=t("<img>"),d=this.$modal;t.isFunction(o.replace)&&(r=o.replace(r)),l.attr("src",r),d.one(g,function(){l.cropper({data:i(n.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){d.find(v).one(h,function(){var i=l.cropper("getData",!0);t.ajax(o.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:a,CropOptions:{original:s(i)},Crop:!0}),dataType:"json",success:function(s){t.isPlainObject(s)&&s.url&&(n.attr("src",s.url).attr("data-crop-options",e(i)).removeAttr("style").removeAttr("rel"),t.isFunction(o.complete)&&o.complete(),d.qorModal("hide"))}})})}})}).one(y,function(){l.cropper("destroy").remove()}).qorModal("show").find(b).append(l)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(l)}},a.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},a.BUTTON='<span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>',a.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',a.plugin=function(e){return this.each(function(){var i,n,s=t(this),o=s.data(l);if(o)/destroy/.test(e)&&s.redactor("core.destroy");else{if(!t.fn.redactor)return;if(/destroy/.test(e))return;s.data(l,o={}),i=s.data(),s.redactor({imageUpload:i.uploadUrl,fileUpload:i.uploadUrl,initCallback:function(){i.cropUrl&&s.data(l,o=new a(s,{remote:i.cropUrl,text:i.text,parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:t.proxy(function(){this.code.sync()},this)}))},focusCallback:function(){s.triggerHandler(u)},blurCallback:function(){s.triggerHandler(p)},imageUploadCallback:function(){s.triggerHandler(f,arguments[0])},imageDeleteCallback:function(){s.triggerHandler(m,arguments[1])}})}"string"==typeof e&&t.isFunction(n=o[e])&&n.apply(o)})},t(function(){var e='textarea[data-toggle="qor.redactor"]';t(document).on(c,function(i){a.plugin.call(t(e,i.target),"destroy")}).on(d,function(i){a.plugin.call(t(e,i.target))}).triggerHandler(d)}),a}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.index=0,this.init()}var i="qor.replicator",n="enable."+i,s="disable."+i,o="click."+i,a="is-template";return e.prototype={constructor:e,init:function(){var t,e=this.$element,i=this.options,n=e.find(i.itemClass);if(this.isMultipleTemplate=e.data().isMultiple,n.length){t=n.filter(i.newClass),t.length||(t=n.last()),t.trigger("disable"),this.$template=t,this.multipleTemplates={};var s=t.filter(e.children(i.childrenClass).children(i.newClass));this.isMultipleTemplate?(this.$template=s,t.remove(),e.children(i.childrenClass).children(i.itemClass).size()&&(this.template=s.prop("outerHTML"),this.parse())):(this.template=t.filter(e.children(i.childrenClass).children(i.newClass)).prop("outerHTML"),t.data(a,!0).hide(),this.parse()),this.bind()}},parse:function(t){var e=0;this.template&&(this.template=this.template.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,i,n){return n=n.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,s,o,a){return t===n?("name"===i&&(e=o),s+"[{{index}}]"+a):void 0}),i+'="'+n+'"'}),t||(this.index=parseFloat(e)))},bind:function(){var e=this.options;this.$element.on(o,e.addClass,t.proxy(this.add,this)).on(o,e.delClass,t.proxy(this.del,this))},unbind:function(){this.$element.off(o,this.add).off(o,this.del)},add:function(e){var i=this.options,n=this,s=t(e.target).closest(this.options.addClass),o=s.data().template,a=s.closest(this.$element),r=a.children(i.childrenClass),l=this.$template;this.isMultipleTemplate&&this.$template.each(function(){n.multipleTemplates[t(this).data().fieldsetName]=t(this)});var d=this.multipleTemplates[o];if(this.isMultipleTemplate){if(s.length){this.template=d.prop("outerHTML"),this.parse(!0),l=t(this.template.replace(/\{\{index\}\}/g,++this.index));for(var c in s.data())if(c.match(/^sync/)){var h=c.replace(/^sync/,"");l.find("input[name*='."+h+"']").val(s.data(c))}s.closest(i.childrenClass).children("fieldset").size()?s.closest(i.childrenClass).children("fieldset").last().after(l.show()):r.prepend(l.show())}}else this.$template&&this.$template.filter(r.children(i.newClass)).is(":hidden")?this.$template.filter(r.children(i.newClass)).show():s.length&&(l=t(this.template.replace(/\{\{index\}\}/g,++this.index)),s.before(l.show()));l&&l.trigger("enable"),e.stopPropagation()},del:function(e){var i,n=this.options,s=t(e.target).closest(n.itemClass);s.is(n.newClass)?s.trigger("disable").remove():(s.children(":visible").addClass("hidden").hide(),i=t(n.alertTemplate.replace("{{name}}",this.parseName(s))),i.find(n.undoClass).one(o,function(){i.remove(),s.children(".hidden").removeClass("hidden").show()}),s.append(i))},parseName:function(t){var e=t.find("input[name]").attr("name");return e?e.replace(/[^\[\]]+$/,""):void 0},destroy:function(){this.unbind(),this.$element.removeData(i)}},e.DEFAULTS={itemClass:!1,newClass:!1,addClass:!1,delClass:!1,childrenClass:!1,alertTemplate:""},e.plugin=function(n){return this.each(function(){var s,o=t(this),a=o.data(i);a||o.data(i,a=new e(this,n)),"string"==typeof n&&t.isFunction(s=a[n])&&s.call(a)})},t(function(){var i=".qor-fieldset-container",o={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'};t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),o)}).triggerHandler(n)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(e,i){this.options=i,this.$element=t(e),this.init()}var i=t(document),n="qor.selector",s="enable."+n,o="disable."+n,a="click."+n,r="open",l="active",d="selected",c="disabled",h="clearable",u="."+d,p=".qor-selector-toggle",f=".qor-selector-label",m=".qor-selector-clear",g=".qor-selector-menu";return e.prototype={constructor:e,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var i=this.$element,n=t(e.TEMPLATE),s=this.options.aligned+"-aligned",o={};n.addClass(s).find(g).html(function(){var e=[];return i.children().each(function(){var i=t(this),n=i.attr("selected"),s=i.attr("disabled"),a=i.attr("value"),r=i.text(),l=[];n&&(l.push(d),o.value=a,o.label=r),s&&l.push(c),e.push("<li"+(l.length?' class="'+l.join(" ")+'"':"")+' data-value="'+a+'" data-label="'+r+'">'+r+"</li>")}),e.join("")}),this.$selector=n,i.hide().after(n),this.pick(o,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(a,t.proxy(this.click,this)),i.on(a,t.proxy(this.close,this))},unbind:function(){this.$selector.off(a,this.click),i.off(a,this.close)},click:function(e){var i=t(e.target);e.stopPropagation(),i.is(m)?this.clear():i.is("li")?(i.hasClass(d)||i.hasClass(c)||this.pick(i.data()),this.close()):i.closest(p).length&&this.open()},pick:function(t,e){var i=this.$selector,n=!!t.value;i.find(p).toggleClass(l,n).toggleClass(h,n&&this.options.clearable).find(f).text(t.label||this.placeholder),e||(i.find(g).children('[data-value="'+t.value+'"]').addClass(d).siblings(u).removeClass(d),this.$element.val(t.value).trigger("change"))},clear:function(){this.$selector.find(p).removeClass(l).removeClass(h).find(f).text(this.placeholder).end().end().find(g).children(u).removeClass(d),this.$element.val("").trigger("change")},open:function(){i.triggerHandler(a),this.$selector.addClass(r)},close:function(){this.$selector.removeClass(r)},destroy:function(){this.unbuild(),this.$element.removeData(n)}},e.DEFAULTS={aligned:"left",clearable:!1},e.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',e.plugin=function(i){return this.each(function(){var s,o,a=t(this),r=a.data(n);if(!r){if(/destroy/.test(i))return;s=t.extend({},e.DEFAULTS,a.data(),"object"==typeof i&&i),a.data(n,r=new e(this,s))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t(function(){var i='[data-toggle="qor.selector"]';t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(s)}),e}),$.fn.qorSliderAfterShow={},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.slided=!1,this.disabled=!1,this.init()}var i=t(document),n=window.FormData,s="qor.slideout",o="enable."+s,a="disable."+s,r="keyup."+s,l="click."+s,d="submit."+s,c="show."+s,h="shown."+s,u="hide."+s,p="hidden."+s,f="transitionend",m="qor-slideout-open",g="is-shown",y="is-slided",b="is-selected",v=".mdl-layout__content.qor-page",w=".qor-actions__locale";return e.prototype={constructor:e,init:function(){this.build(),this.bind()},build:function(){var i;this.$slideout=i=t(e.TEMPLATE).appendTo("body"),this.$title=i.find(".qor-slideout__title"),this.$body=i.find(".qor-slideout__body")},unbuild:function(){this.$title=null,this.$body=null,this.$slideout.remove()},bind:function(){this.$slideout.on(d,"form",t.proxy(this.submit,this)),i.on(r,t.proxy(this.keyup,this)).on(l,t.proxy(this.click,this))},unbind:function(){this.$slideout.off(d,this.submit),i.off(r,this.keyup).off(l,this.click)},keyup:function(t){27===t.which&&this.hide()},click:function(e){function i(){a.find("tbody > tr").removeClass(b),s.addClass(b)}var n,s,o,a=this.$element,r=this.$slideout.get(0),l=e.target;if(!e.isDefaultPrevented())for(;l!==document&&(n=!1,s=t(l),!s.prop("disabled"))&&l!==r;){if("slideout"===s.data("dismiss")){this.hide();break}if(s.is("table.qor-table > tbody > tr[data-url]")){if(t(e.target).parents(".qor-table__actions").size()>0)return;this.loading||s.hasClass(b)||(a.one(c,i),o=s.data(),this.load(o.url));break}if(s.data("url")){e.preventDefault(),o=s.data(),this.load(o.url,o);break}if(s.is("a"))break;if(!l)break;l=l.parentNode}},submit:function(e){var i=this.$slideout,s=this.$body,o=e.target,a=t(o),r=this,l=a.find(":submit");n&&(e.preventDefault(),t.ajax(a.prop("action"),{method:a.prop("method"),data:new n(o),processData:!1,contentType:!1,beforeSend:function(){l.prop("disabled",!0)},success:function(){var t=a.data("returnUrl");t?r.load(t):r.refresh()},error:function(e,n,o){var r;422===e.status?(s.find(".qor-error").remove(),a.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),r=t(e.responseText).find(".qor-error"),a.before(r),r.find("> li > label").each(function(){var e=t(this),i=e.attr("for");i&&a.find("#"+i).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))}),i.scrollTop(0)):window.alert([n,o].join(": "))},complete:function(){l.prop("disabled",!1)}}))},load:function(e,i){var n,s,o,a=this.options;e&&!this.loading&&(this.loading=!0,i=t.isPlainObject(i)?i:{},n=i.method?i.method:"GET",s=i.datatype?i.datatype:"html",i.url=i.method=i.datatype=void 0,o=t.proxy(function(){t.ajax(e,{method:n,data:i,dataType:s,success:t.proxy(function(s){var o,r;if("GET"===n){if(o=t(s),r=o.find(v),!r.length)return;if(r.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),this.$title.html(o.find(a.title).html()),this.$body.html(r.html()),this.$body.find(w).remove(),this.$slideout.one(h,function(){t(this).trigger("enable")}).one(p,function(){t(this).trigger("disable")}),this.show(),a.afterShow){var l=t.fn.qorSliderAfterShow;for(var d in l)l.hasOwnProperty(d)&&l[d].call(this,e)}}else i.returnUrl?(this.loading=!1,this.load(i.returnUrl)):this.refresh()},this),error:t.proxy(function(e){var i;i=t(".qor-error span").size()>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):e.responseText,window.alert(e.responseText)},this),complete:t.proxy(function(){this.loading=!1},this)})},this),this.slided?(this.hide(),this.$slideout.one(p,o)):o())},show:function(){var e,i=this.$slideout;this.slided||(e=t.Event(c),i.trigger(e),e.isDefaultPrevented()||(i.addClass(g).get(0).offsetWidth,i.one(f,t.proxy(this.shown,this)).addClass(y).scrollTop(0)))},shown:function(){this.slided=!0,t("body").addClass(m),this.$slideout.trigger(h)},hide:function(){var e,i=this.$slideout;this.slided&&(e=t.Event(u),i.trigger(e),e.isDefaultPrevented()||i.one(f,t.proxy(this.hidden,this)).removeClass(y))},hidden:function(){this.slided=!1,t("body").removeClass(m),this.$element.find("tbody > tr").removeClass(b),this.$slideout.removeClass(g).trigger(p)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},toggle:function(){this.slided?this.hide():this.show()},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},e.DEFAULTS={title:!1,content:!1},e.TEMPLATE='<div class="qor-slideout"><div class="qor-slideout__header"><button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout"><span class="material-icons">close</span></button><h3 class="qor-slideout__title"></h3></div><div class="qor-slideout__body"></div></div>',e.plugin=function(i){return this.each(function(){var n,o=t(this),a=o.data(s);if(!a){if(/destroy/.test(i))return;o.data(s,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t(function(){var i=".qor-theme-slideout",n={title:".qor-form-title, .mdl-layout-title",afterShow:t.fn.qorSliderAfterShow?t.fn.qorSliderAfterShow:null};t(document).on(o,function(s){/slideout/.test(s.namespace)&&e.plugin.call(t(i,s.target),n)}).on(a,function(n){/slideout/.test(n.namespace)&&e.plugin.call(t(i,n.target),"destroy")}).triggerHandler(o)}),e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n="qor.sorter",s="enable."+n,o="disable."+n,a="click."+n,r="is-sortable";return e.prototype={constructor:e,init:function(){this.$element.addClass(r),this.bind()},bind:function(){this.$element.on(a,"> thead > tr > th",t.proxy(this.sort,this))},unbind:function(){this.$element.off(a,this.sort)},sort:function(e){var n=t(e.currentTarget),s=n.data("orderBy"),o=i.search,a="order_by="+s;s&&(/order_by/.test(o)?o=o.replace(/order_by(=\w+)?/,function(){return a}):o+=o.indexOf("?")>-1?"&"+a:a,i.search=o)},destroy:function(){this.unbind(),this.$element.removeClass(r).removeData(n)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var s,o=t(this),a=o.data(n);if(!a){if(/destroy/.test(i))return;o.data(n,a=new e(this,i))}"string"==typeof i&&t.isFunction(s=a[i])&&s.apply(a)})},t(function(){var i=".qor-js-table";t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(s)}),e});